<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Hueveras de cartón 2</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.87.0/phaser.min.js"></script>
		<script>

let canvas_w = 800;
let canvas_y = 450;

let config =
{
	width: canvas_w,
	height: canvas_y,
	scene:
	{
		preload: precarga,
		create: crea,
		update: actualiza
	}
};

let game = new Phaser.Game(config);

//let rect;
//let rect_dir = 4;
let flechas;

let huevera_b, huevera_m, huevera_d;
let huevo_b, huevo_m, huevo_d;
let canvas_bg;

function precarga()
{
	this.load.image('huevera', 'recursos/huevera.png');
	this.load.image('huevo', 'recursos/huevo.png');
	this.load.image ('fondo', 'recursos/fondo.png');
}

function crea()
{
//rect = this.add.rectangle(400, 225, 32, 32, 0xffffff); 
	
	flechas = this.input.keyboard.createCursorKeys();

	//Fondo!
		canvas_bg = this.add.image(canvas_w/2, canvas_y/2, 'fondo');
		
	//Hueveras en la parte izquierda:
		huevera_b = this.add.image(140, 100, 'huevera').setScale(0.75);
		huevera_m = this.add.image(140, 225, 'huevera').setScale(0.75).setTint(Phaser.Display.Color.GetColor(255, 128, 16));
		huevera_d = this.add.image(140, 350, 'huevera').setScale(0.75).setTint(Phaser.Display.Color.GetColor(255, 229, 122));

	//Huevos en fila en la parte derecha:
		huevo_b = this.add.image(450, 225, 'huevo').setScale(1);
		huevo_m = this.add.image(550, 225, 'huevo').setScale(1).setTint(Phaser.Display.Color.GetColor(255, 128, 16));
		huevo_d = this.add.image(650, 225, 'huevo').setScale(1).setTint(Phaser.Display.Color.GetColor(255, 229, 122));

	//Detectar clics en los huevos:
		huevo_b.setInteractive({draggable:true});
		huevo_m.setInteractive({draggable:true});
		huevo_d.setInteractive({draggable:true});

		huevo_b.on('pointerdown', function ()
		{ console.log("Huevo blanco clickado"); });

		huevo_m.on('pointerdown', function ()
		{ console.log("Huevo marrón clickado"); });

		huevo_d.on('pointerdown', function ()
		{ console.log("Huevo dorado clickado"); });

		this.input.on('drag', function (pointer, object, x, y) {
		object.x = x;
		object.y = y;	
		object.setScale(1.35);
		if (Phaser.Geom.Intersects.RectangleToRectangle(huevera_m.getBounds(), object.getBounds())){
		console.log("Huevo dentro de huevera!!");}
		});
		
		this.input.on('dragend', function (pointer, object, x, y) {
    object.setScale(1); });


}

function actualiza()
{

}

function actualiza_rect()
{
	if(flechas.left.isDown)
	{
		rect.x -= rect_dir;
	}
	else if(flechas.right.isDown)
	{
		rect.x += rect_dir;
	}
	if(flechas.up.isDown)
	{
		rect.y -= rect_dir;
	}
	else if(flechas.down.isDown)
	{
		rect.y += rect_dir;
	}
	
	if (rect.x < 0) rect.x = 0;
	if (rect.x > canvas_w) rect.x = canvas_w;
	if (rect.y < 0) rect.y = 0;
	if (rect.y > canvas_y) rect.y = canvas_y;
	
}
		</script>
	</head>
	<body>
		
	</body>
</html>
